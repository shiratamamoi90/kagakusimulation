<!DOCTYPE html>
<html lang="ja">
<head>
  <mata charset="UTF-8">
  <title>masatu</title>
</head>
<body>
  <input type="button" onclick="go()" value="button">
  <input type="button" onclick="c()" value="clear">
  <br>
  <canvas id="c1" width="1000px" height="1000px" style="position:absolute; z-index:0"></canvas>
  <canvas id="c2" width="1000px" height="1000px" style="position:absolute; z-index:1"></canvas>
  <br>

  <script type="text/javascript">
    var c1 = document.getElementById('c1');
    var ctx1 = c1.getContext("2d");
    var c2 = document.getElementById('c2');
    var ctx2 = c2.getContext("2d");

    var a, b;
    var m, t, r, radian, g = 9.8;
    var x, y, x1, y1;

    a = 200.0; b = 900.0;

    r = 20; t = 0;
    radian = Math.PI/4;

    x = 1100.0 - (700.0 / Math.cos(radian));
    y = 1100.0 - (700.0 / Math.sin(radian));

    function go() {
      x1 = x + (r*Math.sqrt(2)); y1 = y;
      t = 0.0;

      update();
    }

    function update(){
      ctx2.clearRect(0, 0, 1000, 1000);
      y1 += (1/2) * g * (t*t);
      x1 += (1/2) * Math.sin(radian*2) * g * (t*t);

      t += 0.05;

      ctx2.fillStyle = "skyblue";
      ctx2.beginPath();
      ctx2.arc(x1, y1, r, 0, Math.PI*2, true);
      ctx2.fill();

      if(x1 < 900 && y1 < 900 ){
        tid = setTimeout("update()", 50);
      }
    }

    function c(){
      ctx2.fillStyle = "#ffffff";
      ctx2.clearRect(0, 0, 1000, 1000);

      ctx2.fillStyle = "skyblue";
      ctx2.beginPath();
      ctx2.arc(x + (r*Math.sqrt(2)), y, r, 0, Math.PI*2, true);
      ctx2.fill();
    }

    ctx1.fillStyle = "#ffffff";
    ctx1.fillRect(0, 0, 1000, 1000);

    ctx1.fillStyle = "black";
    ctx1.beginPath();
    ctx1.moveTo(a, b);
    ctx1.lineTo(b, b);
    ctx1.lineTo(x, y);
    ctx1.stroke();

    ctx2.fillStyle = "skyblue";
    ctx2.beginPath();
    ctx2.arc(x + (r*Math.sqrt(2)), y, r, 0, Math.PI*2, true);
    ctx2.fill();

  </script>
</body>
</html>
